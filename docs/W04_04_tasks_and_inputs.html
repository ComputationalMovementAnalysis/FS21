<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Tasks and inputs | Patterns and Trends in Environmental Data</title>
  <meta name="description" content="Tasks and inputs | Patterns and Trends in Environmental Data" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Tasks and inputs | Patterns and Trends in Environmental Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Tasks and inputs | Patterns and Trends in Environmental Data" />
  
  
  

<meta name="author" content="Patrick Laube, Nils Ratnaweera, Nikolaos Bakogiannis" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="W04_03_preparation.html"/>
<link rel="next" href="W05_01_exercise.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction Chapter</a></li>
<li class="chapter" data-level="" data-path="W01_01_exercise.html"><a href="W01_01_exercise.html"><i class="fa fa-check"></i>Exercise 1</a>
<ul>
<li class="chapter" data-level="" data-path="W01_02_outcomes.html"><a href="W01_02_outcomes.html"><i class="fa fa-check"></i>Learning outcomes</a></li>
<li class="chapter" data-level="" data-path="W01_03_prerequesites.html"><a href="W01_03_prerequesites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html"><i class="fa fa-check"></i>Preperation</a>
<ul>
<li><a href="W01_04_preperations.html#check-you-version-of-r">Check you Version of <code>R</code></a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#check-your-version-of-rstudio"><i class="fa fa-check"></i>Check your Version of RStudio</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#install-the-necessary-packages"><i class="fa fa-check"></i>Install the necessary packages</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#configure-rstudio"><i class="fa fa-check"></i>Configure RStudio</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#prepare-the-folder-structure-for-this-course"><i class="fa fa-check"></i>Prepare the folder structure for this course</a></li>
<li><a href="W01_04_preperations.html#create-an-rstudio-project">Create an RStudio <em>project</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-1-import-data"><i class="fa fa-check"></i>Task 1: Import data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-2-explore-data"><i class="fa fa-check"></i>Task 2: Explore Data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-handling-spatial-data"><i class="fa fa-check"></i>Input: Handling spatial data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-3-project-data-from-wgs84"><i class="fa fa-check"></i>Task 3: Project data from WGS84</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-calculate-convex-hull"><i class="fa fa-check"></i>Input: Calculate Convex Hull</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-4-ploting-spatial-objects"><i class="fa fa-check"></i>Task 4: Ploting spatial objects</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-importing-raster-data"><i class="fa fa-check"></i>Input: Importing raster data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-5-adding-a-background-map"><i class="fa fa-check"></i>Task 5: Adding a background map</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-6-create-an-interactive-map"><i class="fa fa-check"></i>Task 6: Create an interactive map</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W02_01_exercise.html"><a href="W02_01_exercise.html"><i class="fa fa-check"></i>Exercise 2</a>
<ul>
<li class="chapter" data-level="" data-path="W02_01_learning_outcomes.html"><a href="W02_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W02_02_prerequisites.html"><a href="W02_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W02_03_preperation.html"><a href="W02_03_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html"><i class="fa fa-check"></i>Demo Tidyverse</a>
<ul>
<li><a href="W02_04_demo_tidyverse.html#difftime"><code>difftime</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#lead-lag"><code>lead()</code> / <code>lag()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#mutate"><code>mutate()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#group_by"><code>group_by()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#summarise"><code>summarise()</code></a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html#bring-it-all-together"><i class="fa fa-check"></i>Bring it all together…</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and Inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-1-getting-an-overview"><i class="fa fa-check"></i>Task 1: Getting an overview</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#input-geometry-as-columns"><i class="fa fa-check"></i>Input: Geometry as columns</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-2-deriving-movement-parameters-i-speed"><i class="fa fa-check"></i>Task 2: Deriving movement parameters I: Speed</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-3-cross-scale-movement-analysis"><i class="fa fa-check"></i>Task 3: Cross-scale movement analysis</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-4-deriving-movement-parameters-ii-rolling-window-functions"><i class="fa fa-check"></i>Task 4: Deriving movement parameters II: Rolling window functions</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-5-optional-calculate-turning-angles"><i class="fa fa-check"></i>Task 5 (optional): Calculate turning angles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W03_01_exercise.html"><a href="W03_01_exercise.html"><i class="fa fa-check"></i>Exercise 3</a>
<ul>
<li class="chapter" data-level="" data-path="W03_01_learning_outcomes.html"><a href="W03_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W03_02_prerequisites.html"><a href="W03_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W03_03_preperation.html"><a href="W03_03_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and Inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#input-segmentation-as-in-laube-and-purves-2011"><i class="fa fa-check"></i>Input: Segmentation as in Laube and Purves (2011)</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-1-segmentation"><i class="fa fa-check"></i>Task 1: Segmentation</a></li>
<li><a href="W03_04_tasks_and_inputs.html#task-2-specify-and-apply-threshold-d">Task 2: Specify and apply threshold <em>d</em></a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-3-visualize-segmented-trajectories"><i class="fa fa-check"></i>Task 3: Visualize segmented trajectories</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-4-segment-based-analysis"><i class="fa fa-check"></i>Task 4: Segment-based analysis</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-5-similarity-measures"><i class="fa fa-check"></i>Task 5: Similarity measures</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-6-calculate-similarity"><i class="fa fa-check"></i>Task 6: Calculate similarity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W04_01_exercise.html"><a href="W04_01_exercise.html"><i class="fa fa-check"></i>Exercise 4</a>
<ul>
<li class="chapter" data-level="" data-path="W04_01_learning_outcomes.html"><a href="W04_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W04_02_prerequisites.html"><a href="W04_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W04_03_preparation.html"><a href="W04_03_preparation.html"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#input-creating-functions"><i class="fa fa-check"></i>Input: Creating functions</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-1-write-your-own-functions"><i class="fa fa-check"></i>Task 1: Write your own functions</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-2-filter-data"><i class="fa fa-check"></i>Task 2: Filter data</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-3-create-join-key"><i class="fa fa-check"></i>Task 3: Create Join Key</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-4-measuring-distance-at-concurrent-locations"><i class="fa fa-check"></i>Task 4: Measuring distance at concurrent locations</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-5-visualize-data"><i class="fa fa-check"></i>Task 5: Visualize data</a></li>
<li><a href="W04_04_tasks_and_inputs.html#task-6-optional-visualize-data-as-timecube-with-plotly">Task 6 (optional): Visualize data as timecube with <code>plotly</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W05_01_exercise.html"><a href="W05_01_exercise.html"><i class="fa fa-check"></i>Exercise 5</a>
<ul>
<li class="chapter" data-level="" data-path="W05_01_learning_outcomes.html"><a href="W05_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W05_02_preperation.html"><a href="W05_02_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks</a>
<ul>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#tasks-1-import-and-visualize-spatial-data"><i class="fa fa-check"></i>Tasks 1: Import and visualize spatial data</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-2-annotate-trajectories-from-vector-data"><i class="fa fa-check"></i>Task 2: Annotate Trajectories from vector data</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-3-explore-annotated-trajectories"><i class="fa fa-check"></i>Task 3: Explore annotated trajectories</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-4-annotate-trajectories-from-raster-data"><i class="fa fa-check"></i>Task 4: Annotate Trajectories from raster data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Patterns and Trends in Environmental Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tasks-and-inputs-3" class="section level2">
<h2>Tasks and inputs</h2>
<div id="input-creating-functions" class="section level3">
<h3>Input: Creating functions</h3>
<p>Up to now, we have used a variety of different functions designed by other developers. Sometimes we need to execute an operation multiple times, and most often it is reasonable to write a function to do so. Whenever you’ve copied and pasted a block of code more than twice, you should consider writing a function <span class="citation">(<a href="references.html#ref-wickham2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>.</p>
<p>We have violated this rule multiple times when calculating the Euclidean distances between points. Writing and rewriting the code <code>sqrt((x-lead(x,1))^2+(y-lead(y,1))^2)</code> over and over again is not only cumbersome, it is also error prone. We can easily wrap this operation into a function. This input on writing functions should bring you up to speed to do this in your first task.</p>
<p>The first step in writing a function, is picking a name and assigning <code>&lt;- function(){}</code> to it.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="W04_04_tasks_and_inputs.html#cb54-1" aria-hidden="true" tabindex="-1"></a>testfun <span class="ot">&lt;-</span> <span class="cf">function</span>(){}</span></code></pre></div>
<p>To run the function, we have to call the assigned name with the brackets. This function gives no output, which is why we get <code>NULL</code> back.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="W04_04_tasks_and_inputs.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testfun</span>()</span>
<span id="cb55-2"><a href="W04_04_tasks_and_inputs.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb55-3"><a href="W04_04_tasks_and_inputs.html#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="W04_04_tasks_and_inputs.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(testfun)</span>
<span id="cb55-5"><a href="W04_04_tasks_and_inputs.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;function&quot;</span></span></code></pre></div>
<p>To make the function actually <em>do</em> something, we need to specify <em>what</em> should be done within the curly brackets <code>{}</code>. The following function always prints the same statement and accepts no input values:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="W04_04_tasks_and_inputs.html#cb56-1" aria-hidden="true" tabindex="-1"></a>testfun <span class="ot">&lt;-</span> <span class="cf">function</span>(){<span class="fu">print</span>(<span class="st">&quot;this function does nothing&quot;</span>)}</span>
<span id="cb56-2"><a href="W04_04_tasks_and_inputs.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="W04_04_tasks_and_inputs.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">testfun</span>()</span>
<span id="cb56-4"><a href="W04_04_tasks_and_inputs.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;this function does nothing&quot;</span></span></code></pre></div>
<p>If we want the function to accept some input values, we have to define them within the round brackets. For example, I specify a variable named <code>sometext</code> and can call this variable within the execution.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="W04_04_tasks_and_inputs.html#cb57-1" aria-hidden="true" tabindex="-1"></a>testfun <span class="ot">&lt;-</span> <span class="cf">function</span>(sometext){<span class="fu">print</span>(sometext)}</span>
<span id="cb57-2"><a href="W04_04_tasks_and_inputs.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="W04_04_tasks_and_inputs.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">testfun</span>(<span class="at">sometext =</span> <span class="st">&quot;this function does slightly more, but still not much&quot;</span>)</span>
<span id="cb57-4"><a href="W04_04_tasks_and_inputs.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;this function does slightly more, but still not much&quot;</span></span></code></pre></div>
<p>Let’s take a more practical example. Say we want a function that calculates the n<sup>th</sup> root of a value, since the base function <code>sqrt()</code> just returns the 2<sup>nd</sup> root. To do this, we need to know two things:</p>
<ul>
<li>taking the n<sup>th</sup> rooth of x is the same as raising <code>x</code> by the the reciprocal value (“Kehrwert”) of n <span class="math display">\[\sqrt[n]{x}=\ x^{\frac{1}{n}}\]</span></li>
<li>We can raise a value <code>x</code> to the power of a value <code>n</code> in R with the following code: <code>x^n</code></li>
</ul>
<p>To create a function that simplifies taking the n<sup>th</sup> root, we just need one line of code:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="W04_04_tasks_and_inputs.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify two parameters:</span></span>
<span id="cb58-2"><a href="W04_04_tasks_and_inputs.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co"># x: the value  with want to take the root from</span></span>
<span id="cb58-3"><a href="W04_04_tasks_and_inputs.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co"># n: the root we want to take (2 for 2nd root)</span></span>
<span id="cb58-4"><a href="W04_04_tasks_and_inputs.html#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="W04_04_tasks_and_inputs.html#cb58-5" aria-hidden="true" tabindex="-1"></a>nthroot <span class="ot">&lt;-</span> <span class="cf">function</span>(x,n){x<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>n)}</span>
<span id="cb58-6"><a href="W04_04_tasks_and_inputs.html#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="W04_04_tasks_and_inputs.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Test function by taking the second root of 4. </span></span>
<span id="cb58-8"><a href="W04_04_tasks_and_inputs.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Expecting the result to be 2:</span></span>
<span id="cb58-9"><a href="W04_04_tasks_and_inputs.html#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="fu">nthroot</span>(<span class="at">x =</span> <span class="dv">4</span>,<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb58-10"><a href="W04_04_tasks_and_inputs.html#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code></pre></div>
<p>As we already know from using other functions, if we declare our variables in the order that we initially listed them, we do not need to specify the parameters (no need of <code>x =</code>and <code>n =</code>).</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="W04_04_tasks_and_inputs.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nthroot</span>(<span class="dv">27</span>,<span class="dv">3</span>)</span>
<span id="cb59-2"><a href="W04_04_tasks_and_inputs.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb59-3"><a href="W04_04_tasks_and_inputs.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nthroot</span>(<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb59-4"><a href="W04_04_tasks_and_inputs.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.44225</span></span></code></pre></div>
<p>If we want any of our parameters to have default value, we can assign an initial value to the parameter when declaring the variables within the round brackets.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="W04_04_tasks_and_inputs.html#cb60-1" aria-hidden="true" tabindex="-1"></a>nthroot <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">n =</span> <span class="dv">2</span>){x<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>n)}</span>
<span id="cb60-2"><a href="W04_04_tasks_and_inputs.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="W04_04_tasks_and_inputs.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co"># if not stated otherwise, our function takes the square root</span></span>
<span id="cb60-4"><a href="W04_04_tasks_and_inputs.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nthroot</span>(<span class="dv">10</span>)</span>
<span id="cb60-5"><a href="W04_04_tasks_and_inputs.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3.162278</span></span>
<span id="cb60-6"><a href="W04_04_tasks_and_inputs.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># We can still overwrite n</span></span>
<span id="cb60-7"><a href="W04_04_tasks_and_inputs.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nthroot</span>(<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb60-8"><a href="W04_04_tasks_and_inputs.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2.154435</span></span></code></pre></div>
<p>All you need to do now is run these few lines of code at the beginning of your script, and you can use the function for your entire R session. After starting a new session, you will simply have to re-run the lines. So it might be a good idea to place this function within the section <code>Loading environment / libraries</code> of your project.</p>
</div>
<div id="task-1-write-your-own-functions" class="section level3">
<h3>Task 1: Write your own functions</h3>
<p>Create a function for our Euclidean distance calculation. Optionally, write another function to number successive <code>TRUE</code> values with the <code>cumsum()</code> approach from last week.</p>
<p>Note: if you treat your input variables as vectors, they will work in most use cases (in particular in <code>dplyr</code>s <code>mutate()</code> and <code>summarise()</code> functions).</p>
</div>
<div id="task-2-filter-data" class="section level3">
<h3>Task 2: Filter data</h3>
<p>We propose conceptualizing the pattern “meet” as “being close in space <em>and</em> time,” with the notion “close” to be defined for the spatial and the temporal case separately. We will simplify the problem slightly so that we can use a number of R tools and data structures you now have learned to use by now. As a first simplification we propose manipulating the timestamps in such a way, that all observations are sampled concurrently, synchronously. This allows us using the data science concept <em>join</em> for detecting the temporal expression of meet - using <code>DateTimeUTC</code> as the key variable in a join statement: Observations with an identical time stamp will match. Once we have identified the temporal matches, we check if the concurrent observations are also close in space based on the Euclidean distances between concurrent positions.</p>
<p>Simplifying the task even further, we will focus on an interval where we have a continuous, small sampling interval over all our animals. So, filter your dataset to the time period 01.04.2015 - 15.04.2015) and save it to a new variable (e.g. <code>wildschwein_filter</code>). After filtering, visualize your data spatially. Just consider animals with a spatial overlap and remove animals where we cannot expect to find any meet patterns.</p>
<p><img src="patterns-and-trends_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
</div>
<div id="task-3-create-join-key" class="section level3">
<h3>Task 3: Create Join Key</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="W04_04_tasks_and_inputs.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wildschwein_filter)</span>
<span id="cb61-2"><a href="W04_04_tasks_and_inputs.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 6 features and 11 fields</span></span>
<span id="cb61-3"><a href="W04_04_tasks_and_inputs.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  POINT</span></span>
<span id="cb61-4"><a href="W04_04_tasks_and_inputs.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb61-5"><a href="W04_04_tasks_and_inputs.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: 2570245 ymin: 1205259 xmax: 2570375 ymax: 1205320</span></span>
<span id="cb61-6"><a href="W04_04_tasks_and_inputs.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  CH1903+ / LV95</span></span>
<span id="cb61-7"><a href="W04_04_tasks_and_inputs.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 x 12</span></span>
<span id="cb61-8"><a href="W04_04_tasks_and_inputs.html#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   TierID [1]</span></span>
<span id="cb61-9"><a href="W04_04_tasks_and_inputs.html#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   TierID TierName CollarID DatetimeUTC           Lat  Long        E        N</span></span>
<span id="cb61-10"><a href="W04_04_tasks_and_inputs.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb61-11"><a href="W04_04_tasks_and_inputs.html#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 002A   Sabi        12275 2015-03-31 22:00:28  47.0  7.05 2570296. 1205283.</span></span>
<span id="cb61-12"><a href="W04_04_tasks_and_inputs.html#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 002A   Sabi        12275 2015-03-31 22:15:44  47.0  7.05 2570259. 1205259.</span></span>
<span id="cb61-13"><a href="W04_04_tasks_and_inputs.html#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 002A   Sabi        12275 2015-03-31 22:30:44  47.0  7.05 2570255. 1205259.</span></span>
<span id="cb61-14"><a href="W04_04_tasks_and_inputs.html#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 002A   Sabi        12275 2015-03-31 22:46:04  47.0  7.05 2570245. 1205268.</span></span>
<span id="cb61-15"><a href="W04_04_tasks_and_inputs.html#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 002A   Sabi        12275 2015-03-31 23:00:17  47.0  7.05 2570364. 1205314.</span></span>
<span id="cb61-16"><a href="W04_04_tasks_and_inputs.html#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 002A   Sabi        12275 2015-03-31 23:15:12  47.0  7.05 2570375. 1205320.</span></span>
<span id="cb61-17"><a href="W04_04_tasks_and_inputs.html#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # ... with 4 more variables: geometry &lt;POINT [m]&gt;, timelag &lt;dbl&gt;,</span></span>
<span id="cb61-18"><a href="W04_04_tasks_and_inputs.html#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="do">## #   steplength &lt;dbl&gt;, speed &lt;dbl&gt;</span></span></code></pre></div>
<p>Have a look at your dataset. You will notice that samples are taken at every full hour, quarter past, half past and quarter to. The sampling time is usually off by a couple of seconds. Verify if we have the same sampling interval (<code>timelag</code>) throughout our filtered dataset.</p>
<pre><code>## Simple feature collection with 6 features and 11 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 2570245 ymin: 1205259 xmax: 2570375 ymax: 1205320
## projected CRS:  CH1903+ / LV95
## # A tibble: 6 x 12
## # Groups:   TierID [1]
##   TierID TierName CollarID DatetimeUTC           Lat  Long        E        N
##   &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 002A   Sabi        12275 2015-03-31 22:00:28  47.0  7.05 2570296. 1205283.
## 2 002A   Sabi        12275 2015-03-31 22:15:44  47.0  7.05 2570259. 1205259.
## 3 002A   Sabi        12275 2015-03-31 22:30:44  47.0  7.05 2570255. 1205259.
## 4 002A   Sabi        12275 2015-03-31 22:46:04  47.0  7.05 2570245. 1205268.
## 5 002A   Sabi        12275 2015-03-31 23:00:17  47.0  7.05 2570364. 1205314.
## 6 002A   Sabi        12275 2015-03-31 23:15:12  47.0  7.05 2570375. 1205320.
## # ... with 4 more variables: geometry &lt;POINT [m]&gt;, timelag &lt;dbl&gt;,
## #   steplength &lt;dbl&gt;, speed &lt;dbl&gt;</code></pre>
<p><img src="patterns-and-trends_files/figure-html/unnamed-chunk-100-1.png" width="672" /><img src="patterns-and-trends_files/figure-html/unnamed-chunk-100-2.png" width="672" /></p>
<p>With a few exceptions, the sampling interval is <em>around</em> 15 minutes. In order to join the data, however, we need <em>identical</em> time stamps to serve as a join key. We therefore need to slightly adjust our time stamps to a common, concurrent interval.</p>
<p>Round the minutes of <code>DatetimeUTC</code> to a multiple of 15 (00, 15, 30,45) and store the values in a new column. You can use the <code>lubridate</code> function <code>round_date()</code> for this. See the examples <a href="https://lubridate.tidyverse.org/reference/round_date.html">here</a> to see how this goes.</p>
<p><em>Please note:</em> We are manipulating our time stamps without adjusting the x,y-coordinates. This is fine for our simple example, but we would advice against this in a more serious research endeavour, e.g. in your semester projects. One simple approach would be to linearly interpolate the positions to the new timestamps. If you choose Option A the wild boar projects as your semester projects, you should aim for a linear interpolation. Get in touch if you need help with this.</p>
</div>
<div id="task-4-measuring-distance-at-concurrent-locations" class="section level3">
<h3>Task 4: Measuring distance at concurrent locations</h3>
<p>To measure the distance between concurrent locations, we need to follow the following steps.</p>
<ol style="list-style-type: decimal">
<li>First, split the <code>wildschwein_filter</code> object into one <code>data.frame</code> per animal.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></li>
<li>Next, join these datasets by the new, manipulated <code>Datetime</code> column and save it to the variable <code>wildschwein_join</code>. Which join-type is appropriate? The joined observations are <em>temporally close</em>.</li>
<li>On <code>wildschwein_join</code>, calculate Euclidean distances between concurrent observations. Store the values in a new column <code>distance</code>.</li>
<li>Use a reasonable threshold on <code>distance</code> to determine if the animals are also <em>spatially close</em> enough to constitute a <em>meet</em> (we use 50 meters). Store this Boolean information (<code>TRUE</code>/<code>FALSE</code>) in a new column named <code>meet</code>.</li>
</ol>
<pre><code>## # A tibble: 1,344 x 9
##    TierID.x DatetimeRound           E.x     N.x TierID.y     E.y    N.y distance
##    &lt;chr&gt;    &lt;dttm&gt;                &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
##  1 002A     2015-03-31 22:00:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     482.
##  2 002A     2015-03-31 22:15:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     536.
##  3 002A     2015-03-31 22:30:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     542.
##  4 002A     2015-03-31 22:45:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     564.
##  5 002A     2015-03-31 23:00:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     486.
##  6 002A     2015-03-31 23:15:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     470.
##  7 002A     2015-03-31 23:30:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     440.
##  8 002A     2015-03-31 23:45:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     432.
##  9 002A     2015-04-01 00:00:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     451.
## 10 002A     2015-04-01 00:15:00  2.57e6  1.21e6 016A      2.57e6 1.20e6     522.
## # ... with 1,334 more rows, and 1 more variable: meet &lt;lgl&gt;</code></pre>
</div>
<div id="task-5-visualize-data" class="section level3">
<h3>Task 5: Visualize data</h3>
<p>Now, visualize the <em>meets</em> spatially in a way that you think reasonable. You can attempt to recreate the plot below, but this is not trivial. If you want to try it, these are the steps to take:</p>
<p>Create a new dataset (e.g. <code>wildschwein_meet</code>) as follows:</p>
<ol style="list-style-type: decimal">
<li>Using the <code>cumsum()</code>approach from last week, create a new column (e.g. <code>meet_seq</code>) enumerating the “meets” with individual ID (see proposed function below)</li>
<li>Filter all rows where the animals <em>did</em> meet.</li>
<li>Optional: create a column with the start- and endtime of each meet (e.g. <code>meet_time</code>)</li>
</ol>
<p>To create a plot similar to the one below:</p>
<ol style="list-style-type: decimal">
<li>Initiate a <code>ggplot()</code> with the <code>wildschwein_join</code> dataset.</li>
<li>Add two <code>geom_point</code>-layers (not <code>geom_sf</code>, since we haven’t turned <code>wildschwein_join</code> into an <code>sf</code>object), one referring to E.x/N.x, the other to E.y/N.y</li>
<li>Add two more <code>geom_point</code>-layers, this time with the dataset <code>wildschwein_meet</code></li>
<li>Facet the plot into small multiples either using <code>meet_seq</code> or <code>meet_time</code></li>
</ol>
<p><img src="patterns-and-trends_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
</div>
<div id="task-6-optional-visualize-data-as-timecube-with-plotly" class="section level3">
<h3>Task 6 (optional): Visualize data as timecube with <code>plotly</code></h3>
<p>Finally, you can nicely visualize the meeting patterns and trajectories in a Space-Time-Cube <span class="citation">(<a href="references.html#ref-hagerstraand1970" role="doc-biblioref">Hägerstraand 1970</a>)</span> with the package <code>plotly</code>. There are some <a href="https://plot.ly/r/3d-line-plots/">nice ressources</a> available online.</p>
<p><img src="patterns-and-trends_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>This is a perfect opportunity to learn functional programming if you are an intermediate to advanced programmer (or want to be). You can use <code>purrr::map()</code> specifically for these tasks. Ask us if you want to learn this but are struggling<a href="W04_04_tasks_and_inputs.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="W04_03_preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="W05_01_exercise.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["patterns-and-trends.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
