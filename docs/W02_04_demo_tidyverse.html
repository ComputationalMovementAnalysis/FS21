<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Demo Tidyverse | Patterns and Trends in Environmental Data</title>
  <meta name="description" content="Demo Tidyverse | Patterns and Trends in Environmental Data" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Demo Tidyverse | Patterns and Trends in Environmental Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Demo Tidyverse | Patterns and Trends in Environmental Data" />
  
  
  

<meta name="author" content="Patrick Laube, Nils Ratnaweera, Nikolaos Bakogiannis" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="W02_03_preperation.html"/>
<link rel="next" href="W02_05_tasks_and_inputs.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction Chapter</a></li>
<li class="chapter" data-level="" data-path="W01_01_exercise.html"><a href="W01_01_exercise.html"><i class="fa fa-check"></i>Exercise 1</a>
<ul>
<li class="chapter" data-level="" data-path="W01_02_outcomes.html"><a href="W01_02_outcomes.html"><i class="fa fa-check"></i>Learning outcomes</a></li>
<li class="chapter" data-level="" data-path="W01_03_prerequesites.html"><a href="W01_03_prerequesites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html"><i class="fa fa-check"></i>Preperation</a>
<ul>
<li><a href="W01_04_preperations.html#check-you-version-of-r">Check you version of <code>R</code></a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#check-your-version-of-rstudio"><i class="fa fa-check"></i>Check your version of RStudio</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#install-the-necessary-packages"><i class="fa fa-check"></i>Install the necessary packages</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#configure-rstudio"><i class="fa fa-check"></i>Configure RStudio</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#introduce-yourself-to-git"><i class="fa fa-check"></i>Introduce yourself to Git</a></li>
<li class="chapter" data-level="" data-path="W01_04_preperations.html"><a href="W01_04_preperations.html#prepare-the-folder-structure-for-this-course"><i class="fa fa-check"></i>Prepare the folder structure for this course</a></li>
<li><a href="W01_04_preperations.html#create-an-rstudio-project-for-the-first-week">Create an RStudio <em>project</em> for the first week</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-1-import-data"><i class="fa fa-check"></i>Task 1: Import data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-2-explore-data"><i class="fa fa-check"></i>Task 2: Explore Data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-handling-spatial-data"><i class="fa fa-check"></i>Input: Handling spatial data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-3-project-data-from-wgs84"><i class="fa fa-check"></i>Task 3: Project data from WGS84</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-calculate-convex-hull"><i class="fa fa-check"></i>Input: Calculate Convex Hull</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-4-ploting-spatial-objects"><i class="fa fa-check"></i>Task 4: Ploting spatial objects</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#input-importing-raster-data"><i class="fa fa-check"></i>Input: Importing raster data</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-5-adding-a-background-map"><i class="fa fa-check"></i>Task 5: Adding a background map</a></li>
<li class="chapter" data-level="" data-path="W01_05_tasks_and_inputs.html"><a href="W01_05_tasks_and_inputs.html#task-6-create-an-interactive-map"><i class="fa fa-check"></i>Task 6: Create an interactive map</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W02_01_exercise.html"><a href="W02_01_exercise.html"><i class="fa fa-check"></i>Exercise 2</a>
<ul>
<li class="chapter" data-level="" data-path="W02_01_learning_outcomes.html"><a href="W02_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W02_02_prerequisites.html"><a href="W02_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W02_03_preperation.html"><a href="W02_03_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html"><i class="fa fa-check"></i>Demo Tidyverse</a>
<ul>
<li><a href="W02_04_demo_tidyverse.html#difftime"><code>difftime</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#lead-lag"><code>lead()</code> / <code>lag()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#mutate"><code>mutate()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#group_by"><code>group_by()</code></a></li>
<li><a href="W02_04_demo_tidyverse.html#summarise"><code>summarise()</code></a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html#piping"><i class="fa fa-check"></i>Piping</a></li>
<li class="chapter" data-level="" data-path="W02_04_demo_tidyverse.html"><a href="W02_04_demo_tidyverse.html#bring-it-all-together"><i class="fa fa-check"></i>Bring it all together…</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and Inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-1-getting-an-overview"><i class="fa fa-check"></i>Task 1: Getting an overview</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#input-geometry-as-columns"><i class="fa fa-check"></i>Input: Geometry as columns</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-2-deriving-movement-parameters-i-speed"><i class="fa fa-check"></i>Task 2: Deriving movement parameters I: Speed</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-3-cross-scale-movement-analysis"><i class="fa fa-check"></i>Task 3: Cross-scale movement analysis</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-4-deriving-movement-parameters-ii-rolling-window-functions"><i class="fa fa-check"></i>Task 4: Deriving movement parameters II: Rolling window functions</a></li>
<li class="chapter" data-level="" data-path="W02_05_tasks_and_inputs.html"><a href="W02_05_tasks_and_inputs.html#task-5-optional-calculate-turning-angles"><i class="fa fa-check"></i>Task 5 (optional): Calculate turning angles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W03_01_exercise.html"><a href="W03_01_exercise.html"><i class="fa fa-check"></i>Exercise 3</a>
<ul>
<li class="chapter" data-level="" data-path="W03_01_learning_outcomes.html"><a href="W03_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W03_02_prerequisites.html"><a href="W03_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W03_03_preperation.html"><a href="W03_03_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and Inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#input-segmentation-as-in-laube-and-purves-2011"><i class="fa fa-check"></i>Input: Segmentation as in Laube and Purves (2011)</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-1-segmentation"><i class="fa fa-check"></i>Task 1: Segmentation</a></li>
<li><a href="W03_04_tasks_and_inputs.html#task-2-specify-and-apply-threshold-d">Task 2: Specify and apply threshold <em>d</em></a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-3-visualize-segmented-trajectories"><i class="fa fa-check"></i>Task 3: Visualize segmented trajectories</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-4-segment-based-analysis"><i class="fa fa-check"></i>Task 4: Segment-based analysis</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-5-similarity-measures"><i class="fa fa-check"></i>Task 5: Similarity measures</a></li>
<li class="chapter" data-level="" data-path="W03_04_tasks_and_inputs.html"><a href="W03_04_tasks_and_inputs.html#task-6-calculate-similarity"><i class="fa fa-check"></i>Task 6: Calculate similarity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W04_01_exercise.html"><a href="W04_01_exercise.html"><i class="fa fa-check"></i>Exercise 4</a>
<ul>
<li class="chapter" data-level="" data-path="W04_01_learning_outcomes.html"><a href="W04_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W04_02_prerequisites.html"><a href="W04_02_prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="W04_03_preparation.html"><a href="W04_03_preparation.html"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks and inputs</a>
<ul>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#input-creating-functions"><i class="fa fa-check"></i>Input: Creating functions</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-1-write-your-own-functions"><i class="fa fa-check"></i>Task 1: Write your own functions</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-2-filter-data"><i class="fa fa-check"></i>Task 2: Filter data</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-3-create-join-key"><i class="fa fa-check"></i>Task 3: Create Join Key</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-4-measuring-distance-at-concurrent-locations"><i class="fa fa-check"></i>Task 4: Measuring distance at concurrent locations</a></li>
<li class="chapter" data-level="" data-path="W04_04_tasks_and_inputs.html"><a href="W04_04_tasks_and_inputs.html#task-5-visualize-data"><i class="fa fa-check"></i>Task 5: Visualize data</a></li>
<li><a href="W04_04_tasks_and_inputs.html#task-6-optional-visualize-data-as-timecube-with-plotly">Task 6 (optional): Visualize data as timecube with <code>plotly</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="W05_01_exercise.html"><a href="W05_01_exercise.html"><i class="fa fa-check"></i>Exercise 5</a>
<ul>
<li class="chapter" data-level="" data-path="W05_01_learning_outcomes.html"><a href="W05_01_learning_outcomes.html"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="W05_02_preperation.html"><a href="W05_02_preperation.html"><i class="fa fa-check"></i>Preperation</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html"><i class="fa fa-check"></i>Tasks</a>
<ul>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#tasks-1-import-and-visualize-spatial-data"><i class="fa fa-check"></i>Tasks 1: Import and visualize spatial data</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-2-annotate-trajectories-from-vector-data"><i class="fa fa-check"></i>Task 2: Annotate Trajectories from vector data</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-3-explore-annotated-trajectories"><i class="fa fa-check"></i>Task 3: Explore annotated trajectories</a></li>
<li class="chapter" data-level="" data-path="W05_03_tasks_and_inputs.html"><a href="W05_03_tasks_and_inputs.html#task-4-annotate-trajectories-from-raster-data"><i class="fa fa-check"></i>Task 4: Annotate Trajectories from raster data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Patterns and Trends in Environmental Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="demo-tidyverse" class="section level2">
<h2>Demo Tidyverse</h2>
<p>Depending on your knowledge of <code>R</code>, getting an overview of the data we imported last week might have been quite a challenge. Surprisingly enough, importing, cleaning and exploring your data can be the most challenging, time consuming part of a project. RStudio and the tidyverse offer many helpful tools to make this part easier (and more fun). You have read chapters on <code>dplyr</code> and <code>magrittr</code> as a preparation for this exercise. Before we start with the exercise however, this demo illustrates a simple approach offered by tidyverse which is applicable to sf-objects.</p>
<p>Assume we want to calculate the timelag between subsequent positions. To achieve this we can use the function <code>difftime()</code> combined with <code>lead()</code> from <code>dplyr</code>. Let’s look at these functions one by one.</p>
<div id="difftime" class="section level3">
<h3><code>difftime</code></h3>
<p><code>difftime</code> takes two <code>POSIXct</code> values.</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="W02_04_demo_tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a>now <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb28-2"><a href="W02_04_demo_tidyverse.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="W02_04_demo_tidyverse.html#cb28-3" aria-hidden="true" tabindex="-1"></a>later <span class="ot">&lt;-</span> now <span class="sc">+</span> <span class="dv">10000</span></span>
<span id="cb28-4"><a href="W02_04_demo_tidyverse.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="W02_04_demo_tidyverse.html#cb28-5" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">difftime</span>(later,now)</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="W02_04_demo_tidyverse.html#cb29-1" aria-hidden="true" tabindex="-1"></a>time_difference</span>
<span id="cb29-2"><a href="W02_04_demo_tidyverse.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Time difference of 2.777778 hours</span></span></code></pre></div>
<p>You can also specify the unit of the output.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="W02_04_demo_tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">difftime</span>(later,now,<span class="at">units =</span> <span class="st">&quot;mins&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="W02_04_demo_tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a>time_difference</span>
<span id="cb31-2"><a href="W02_04_demo_tidyverse.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Time difference of 166.6667 mins</span></span></code></pre></div>
<p><code>difftime</code> returns an object of the Class <code>difftime</code>. However in our case, numeric values would be more handy than the Class <code>difftime</code>. So we’ll wrap the command in <code>as.numeric()</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="W02_04_demo_tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(time_difference)</span>
<span id="cb32-2"><a href="W02_04_demo_tidyverse.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  &#39;difftime&#39; num 166.666666666667</span></span>
<span id="cb32-3"><a href="W02_04_demo_tidyverse.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  - attr(*, &quot;units&quot;)= chr &quot;mins&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="W02_04_demo_tidyverse.html#cb33-1" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(later,now,<span class="at">units =</span> <span class="st">&quot;mins&quot;</span>))</span>
<span id="cb33-2"><a href="W02_04_demo_tidyverse.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="W02_04_demo_tidyverse.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(time_difference)</span>
<span id="cb33-4"><a href="W02_04_demo_tidyverse.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  num 167</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="W02_04_demo_tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>now <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb20-2"><a href="W02_04_demo_tidyverse.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="W02_04_demo_tidyverse.html#cb20-3" aria-hidden="true" tabindex="-1"></a>later <span class="ot">&lt;-</span> now <span class="sc">+</span> <span class="dv">10000</span></span>
<span id="cb20-4"><a href="W02_04_demo_tidyverse.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="W02_04_demo_tidyverse.html#cb20-5" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">difftime</span>(later,now)</span></code></pre></div>
<p>You can also specify the unit of the output.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="W02_04_demo_tidyverse.html#cb21-1" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">difftime</span>(later,now,<span class="at">units =</span> <span class="st">&quot;mins&quot;</span>)</span></code></pre></div>
<p><code>difftime</code> returns an object of the Class <code>difftime</code>. However in our case, numeric values would be more handy than the Class <code>difftime</code>. So we’ll wrap the command in <code>as.numeric()</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="W02_04_demo_tidyverse.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(time_difference)</span>
<span id="cb22-2"><a href="W02_04_demo_tidyverse.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  &#39;difftime&#39; num 166.666666666667</span></span>
<span id="cb22-3"><a href="W02_04_demo_tidyverse.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  - attr(*, &quot;units&quot;)= chr &quot;mins&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="W02_04_demo_tidyverse.html#cb23-1" aria-hidden="true" tabindex="-1"></a>time_difference <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(later,now,<span class="at">units =</span> <span class="st">&quot;mins&quot;</span>))</span>
<span id="cb23-2"><a href="W02_04_demo_tidyverse.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="W02_04_demo_tidyverse.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(time_difference)</span>
<span id="cb23-4"><a href="W02_04_demo_tidyverse.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  num 167</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
</div>
<div id="lead-lag" class="section level3">
<h3><code>lead()</code> / <code>lag()</code></h3>
<p><code>lead()</code> and <code>lag()</code> return a vector of the same length as the input, just offset by a specific number of values (default is 1). Consider the following sequence:</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="W02_04_demo_tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb34-2"><a href="W02_04_demo_tidyverse.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="W02_04_demo_tidyverse.html#cb34-3" aria-hidden="true" tabindex="-1"></a>numbers</span>
<span id="cb34-4"><a href="W02_04_demo_tidyverse.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1  2  3  4  5  6  7  8  9 10</span></span></code></pre></div>
<p>We can now run <code>lead()</code> and <code>lag()</code> on this sequence to illustrate the output. <code>n =</code> specifies the offset, <code>default =</code> specifies the default value used to “fill” the emerging “empty spaces” of the vector.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="W02_04_demo_tidyverse.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(numbers)</span>
<span id="cb35-2"><a href="W02_04_demo_tidyverse.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  2  3  4  5  6  7  8  9 10 NA</span></span>
<span id="cb35-3"><a href="W02_04_demo_tidyverse.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="W02_04_demo_tidyverse.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(numbers,<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb35-5"><a href="W02_04_demo_tidyverse.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  3  4  5  6  7  8  9 10 NA NA</span></span>
<span id="cb35-6"><a href="W02_04_demo_tidyverse.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="W02_04_demo_tidyverse.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers)</span>
<span id="cb35-8"><a href="W02_04_demo_tidyverse.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] NA  1  2  3  4  5  6  7  8  9</span></span>
<span id="cb35-9"><a href="W02_04_demo_tidyverse.html#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="W02_04_demo_tidyverse.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers,<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb35-11"><a href="W02_04_demo_tidyverse.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] NA NA NA NA NA  1  2  3  4  5</span></span>
<span id="cb35-12"><a href="W02_04_demo_tidyverse.html#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="W02_04_demo_tidyverse.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers,<span class="at">n =</span> <span class="dv">5</span>, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb35-14"><a href="W02_04_demo_tidyverse.html#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 0 0 0 0 0 1 2 3 4 5</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="W02_04_demo_tidyverse.html#cb24-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb24-2"><a href="W02_04_demo_tidyverse.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="W02_04_demo_tidyverse.html#cb24-3" aria-hidden="true" tabindex="-1"></a>numbers</span>
<span id="cb24-4"><a href="W02_04_demo_tidyverse.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1  2  3  4  5  6  7  8  9 10</span></span></code></pre></div>
<p>We can now run <code>lead()</code> and <code>lag()</code> on this sequence to illustrate the output. <code>n =</code> specifies the offset, <code>default =</code> specifies the default value used to “fill” the emerging “empty spaces” of the vector.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="W02_04_demo_tidyverse.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(numbers)</span>
<span id="cb25-2"><a href="W02_04_demo_tidyverse.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  2  3  4  5  6  7  8  9 10 NA</span></span>
<span id="cb25-3"><a href="W02_04_demo_tidyverse.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="W02_04_demo_tidyverse.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(numbers,<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb25-5"><a href="W02_04_demo_tidyverse.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  3  4  5  6  7  8  9 10 NA NA</span></span>
<span id="cb25-6"><a href="W02_04_demo_tidyverse.html#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="W02_04_demo_tidyverse.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers)</span>
<span id="cb25-8"><a href="W02_04_demo_tidyverse.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] NA  1  2  3  4  5  6  7  8  9</span></span>
<span id="cb25-9"><a href="W02_04_demo_tidyverse.html#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="W02_04_demo_tidyverse.html#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers,<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb25-11"><a href="W02_04_demo_tidyverse.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] NA NA NA NA NA  1  2  3  4  5</span></span>
<span id="cb25-12"><a href="W02_04_demo_tidyverse.html#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="W02_04_demo_tidyverse.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(numbers,<span class="at">n =</span> <span class="dv">5</span>, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb25-14"><a href="W02_04_demo_tidyverse.html#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 0 0 0 0 0 1 2 3 4 5</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
<p>This helps us performing operations on subsequent values in a vector (or rows in a table). You can think of this a little bit like a moving temporal window that moves along the trajectory, or down the rows of a table respectively.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="W02_04_demo_tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(numbers)<span class="sc">-</span>numbers</span>
<span id="cb36-2"><a href="W02_04_demo_tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1  1  1  1  1  1  1  1  1 NA</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3">
<h3><code>mutate()</code></h3>
<p>Using the above functions (<code>difftime()</code> and <code>lead()</code>), we can calculate the time lag, that is, the time difference between subsequent positions:</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="W02_04_demo_tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-2"><a href="W02_04_demo_tidyverse.html#cb37-2" aria-hidden="true" tabindex="-1"></a>wildschwein_BE<span class="sc">$</span>timelag  <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(wildschwein_BE<span class="sc">$</span>DatetimeUTC),</span>
<span id="cb37-3"><a href="W02_04_demo_tidyverse.html#cb37-3" aria-hidden="true" tabindex="-1"></a>                                               wildschwein_BE<span class="sc">$</span>DatetimeUTC,</span>
<span id="cb37-4"><a href="W02_04_demo_tidyverse.html#cb37-4" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>))</span></code></pre></div>
<p>We mention <code>wildschwein_BE</code> three times in this function, which is complicated. Instead, we can use <code>mutate()</code> to simplify the syntax:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="W02_04_demo_tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">mutate</span>(wildschwein_BE,<span class="at">timelag =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(DatetimeUTC),</span>
<span id="cb38-2"><a href="W02_04_demo_tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>                                                                      DatetimeUTC,</span>
<span id="cb38-3"><a href="W02_04_demo_tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a>                                                                      <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>)))</span></code></pre></div>
=======
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="W02_04_demo_tidyverse.html#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="W02_04_demo_tidyverse.html#cb26-2" aria-hidden="true" tabindex="-1"></a>wildschwein_BE<span class="sc">$</span>timelag  <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(wildschwein_BE<span class="sc">$</span>DatetimeUTC),</span>
<span id="cb26-3"><a href="W02_04_demo_tidyverse.html#cb26-3" aria-hidden="true" tabindex="-1"></a>                                               wildschwein_BE<span class="sc">$</span>DatetimeUTC,</span>
<span id="cb26-4"><a href="W02_04_demo_tidyverse.html#cb26-4" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>))</span></code></pre></div>
<p>We mention <code>wildschwein_BE</code> three times in this function, which is complicated. Instead, we can use <code>mutate()</code> to simplify the syntax:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="W02_04_demo_tidyverse.html#cb27-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">mutate</span>(wildschwein_BE,<span class="at">timelag =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(DatetimeUTC),</span>
<span id="cb27-2"><a href="W02_04_demo_tidyverse.html#cb27-2" aria-hidden="true" tabindex="-1"></a>                                                                      DatetimeUTC,</span>
<span id="cb27-3"><a href="W02_04_demo_tidyverse.html#cb27-3" aria-hidden="true" tabindex="-1"></a>                                                                      <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>)))</span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
</div>
<div id="group_by" class="section level3">
<h3><code>group_by()</code></h3>
<p>Now let’s have a look at the vector created before:</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="W02_04_demo_tidyverse.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wildschwein_BE<span class="sc">$</span>timelag)</span>
<span id="cb39-2"><a href="W02_04_demo_tidyverse.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="do">##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max.      NA&#39;s </span></span>
<span id="cb39-3"><a href="W02_04_demo_tidyverse.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="do">## -22648470       896       903       571       916     60367         1</span></span></code></pre></div>
<p>These values don’t make much sense: some are negative (which should not be the case) and some are very high (which would indicate large data gaps and should not be the case either). The reason for this result is that we did not consider that <code>timelag</code> should just be calculated between subsequent rows <em>of the same individual</em>. We can implement this by using <code>group_by()</code> (just as if calculating the convex hull last week).</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="W02_04_demo_tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">group_by</span>(wildschwein_BE,TierID)</span></code></pre></div>
<p>After adding this grouping variable, calculating the timelag automatically accounts for the individual trajectories.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="W02_04_demo_tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">mutate</span>(wildschwein_BE,<span class="at">timelag =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(DatetimeUTC),</span>
<span id="cb41-2"><a href="W02_04_demo_tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a>                                                                      DatetimeUTC,</span>
<span id="cb41-3"><a href="W02_04_demo_tidyverse.html#cb41-3" aria-hidden="true" tabindex="-1"></a>                                                                      <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>)))</span>
<span id="cb41-4"><a href="W02_04_demo_tidyverse.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="W02_04_demo_tidyverse.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wildschwein_BE<span class="sc">$</span>timelag)</span>
<span id="cb41-6"><a href="W02_04_demo_tidyverse.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb41-7"><a href="W02_04_demo_tidyverse.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="do">##      12     896     903    1408     916   60367       3</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="W02_04_demo_tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wildschwein_BE<span class="sc">$</span>timelag)</span>
<span id="cb28-2"><a href="W02_04_demo_tidyverse.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="do">##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max.      NA&#39;s </span></span>
<span id="cb28-3"><a href="W02_04_demo_tidyverse.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="do">## -22648470       896       903       571       916     60367         1</span></span></code></pre></div>
<p>These values don’t make much sense: some are negative (which should not be the case) and some are very high (which would indicate large data gaps and should not be the case either). The reason for this result is that we did not consider that <code>timelag</code> should just be calculated between subsequent rows <em>of the same individual</em>. We can implement this by using <code>group_by()</code> (just as if calculating the convex hull last week).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="W02_04_demo_tidyverse.html#cb29-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">group_by</span>(wildschwein_BE,TierID)</span></code></pre></div>
<p>After adding this grouping variable, calculating the timelag automatically accounts for the individual trajectories.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="W02_04_demo_tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="ot">&lt;-</span> <span class="fu">mutate</span>(wildschwein_BE,<span class="at">timelag =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">lead</span>(DatetimeUTC),</span>
<span id="cb30-2"><a href="W02_04_demo_tidyverse.html#cb30-2" aria-hidden="true" tabindex="-1"></a>                                                                      DatetimeUTC,</span>
<span id="cb30-3"><a href="W02_04_demo_tidyverse.html#cb30-3" aria-hidden="true" tabindex="-1"></a>                                                                      <span class="at">units =</span> <span class="st">&quot;secs&quot;</span>)))</span>
<span id="cb30-4"><a href="W02_04_demo_tidyverse.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="W02_04_demo_tidyverse.html#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wildschwein_BE<span class="sc">$</span>timelag)</span>
<span id="cb30-6"><a href="W02_04_demo_tidyverse.html#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb30-7"><a href="W02_04_demo_tidyverse.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="do">##      12     896     903    1408     916   60367       3</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
</div>
<div id="summarise" class="section level3">
<h3><code>summarise()</code></h3>
<p><code>summary()</code> returned the metrics over all individuals. If we want to summarise our data and get metrics <em>per animal</em>, we can use the <code>dplyr</code> function <code>summarise()</code>. In contrast to <code>mutate()</code>, which just adds a new column to the dataset, <code>summarise()</code> “collapses” the data to one row per individual (specified by <code>group_by</code>).</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="W02_04_demo_tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(wildschwein_BE, <span class="at">mean =</span> <span class="fu">mean</span>(timelag, <span class="at">na.rm =</span> T))</span></code></pre></div>
<p>The above operation works fine on normal <code>data.frames</code>, but since <code>wildschwein_BE</code> is also an <code>sf</code> object, <code>summarise</code> actually merges all the points to a multipoint geometry, which takes a long time to calculate. In order to prevent this, we can set the objects geometry to <code>NULL</code>, which removes the spatial attribute.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="W02_04_demo_tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="W02_04_demo_tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="fu">st_set_geometry</span>(wildschwein_BE,<span class="cn">NULL</span>), <span class="at">mean_timelag =</span> <span class="fu">mean</span>(timelag, <span class="at">na.rm =</span> T))</span>
<span id="cb43-3"><a href="W02_04_demo_tidyverse.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 x 2</span></span>
<span id="cb43-4"><a href="W02_04_demo_tidyverse.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   TierID mean_timelag</span></span>
<span id="cb43-5"><a href="W02_04_demo_tidyverse.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb43-6"><a href="W02_04_demo_tidyverse.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 002A          1286.</span></span>
<span id="cb43-7"><a href="W02_04_demo_tidyverse.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 016A          1412.</span></span>
<span id="cb43-8"><a href="W02_04_demo_tidyverse.html#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 018A          1599.</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="W02_04_demo_tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(wildschwein_BE, <span class="at">mean =</span> <span class="fu">mean</span>(timelag, <span class="at">na.rm =</span> T))</span></code></pre></div>
<p>The above operation works fine on normal <code>data.frames</code>, but since <code>wildschwein_BE</code> is also an <code>sf</code> object, <code>summarise</code> actually merges all the points to a multipoint geometry, which takes a long time to calculate. In order to prevent this, we can set the objects geometry to <code>NULL</code>, which removes the spatial attribute.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="W02_04_demo_tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="W02_04_demo_tidyverse.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="fu">st_set_geometry</span>(wildschwein_BE,<span class="cn">NULL</span>), <span class="at">mean_timelag =</span> <span class="fu">mean</span>(timelag, <span class="at">na.rm =</span> T))</span>
<span id="cb32-3"><a href="W02_04_demo_tidyverse.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 x 2</span></span>
<span id="cb32-4"><a href="W02_04_demo_tidyverse.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   TierID mean_timelag</span></span>
<span id="cb32-5"><a href="W02_04_demo_tidyverse.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb32-6"><a href="W02_04_demo_tidyverse.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 002A          1286.</span></span>
<span id="cb32-7"><a href="W02_04_demo_tidyverse.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 016A          1412.</span></span>
<span id="cb32-8"><a href="W02_04_demo_tidyverse.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 018A          1599.</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
</div>
<div id="piping" class="section level3">
<h3>Piping</h3>
<p>The code above may be a bit hard to read, since it has so many nested functions which need to be read from the inside out. In order to make code readable in a more human-friendly way, we can use the piping command <code>%&gt;%</code> from <code>magrittr</code>, which is included in <code>dplyr</code> and the <code>tidyverse</code>. The above code then looks like this:</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="W02_04_demo_tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="W02_04_demo_tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="sc">%&gt;%</span>                     <span class="co"># Take wildschwein_BE...</span></span>
<span id="cb44-3"><a href="W02_04_demo_tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>) <span class="sc">%&gt;%</span>            <span class="co"># ...remove the geometry column...</span></span>
<span id="cb44-4"><a href="W02_04_demo_tidyverse.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TierID) <span class="sc">%&gt;%</span>                 <span class="co"># ...group it by TierID</span></span>
<span id="cb44-5"><a href="W02_04_demo_tidyverse.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(                           <span class="co"># Summarise the data...</span></span>
<span id="cb44-6"><a href="W02_04_demo_tidyverse.html#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_timelag =</span> <span class="fu">mean</span>(timelag,<span class="at">na.rm =</span> T) <span class="co"># ...by calculating the mean timelag</span></span>
<span id="cb44-7"><a href="W02_04_demo_tidyverse.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-8"><a href="W02_04_demo_tidyverse.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 x 2</span></span>
<span id="cb44-9"><a href="W02_04_demo_tidyverse.html#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   TierID mean_timelag</span></span>
<span id="cb44-10"><a href="W02_04_demo_tidyverse.html#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb44-11"><a href="W02_04_demo_tidyverse.html#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 002A          1286.</span></span>
<span id="cb44-12"><a href="W02_04_demo_tidyverse.html#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 016A          1412.</span></span>
<span id="cb44-13"><a href="W02_04_demo_tidyverse.html#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 018A          1599.</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="W02_04_demo_tidyverse.html#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="W02_04_demo_tidyverse.html#cb33-2" aria-hidden="true" tabindex="-1"></a>wildschwein_BE <span class="sc">%&gt;%</span>                     <span class="co"># Take wildschwein_BE...</span></span>
<span id="cb33-3"><a href="W02_04_demo_tidyverse.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>) <span class="sc">%&gt;%</span>            <span class="co"># ...remove the geometry column...</span></span>
<span id="cb33-4"><a href="W02_04_demo_tidyverse.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TierID) <span class="sc">%&gt;%</span>                 <span class="co"># ...group it by TierID</span></span>
<span id="cb33-5"><a href="W02_04_demo_tidyverse.html#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(                           <span class="co"># Summarise the data...</span></span>
<span id="cb33-6"><a href="W02_04_demo_tidyverse.html#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_timelag =</span> <span class="fu">mean</span>(timelag,<span class="at">na.rm =</span> T) <span class="co"># ...by calculating the mean timelag</span></span>
<span id="cb33-7"><a href="W02_04_demo_tidyverse.html#cb33-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-8"><a href="W02_04_demo_tidyverse.html#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 x 2</span></span>
<span id="cb33-9"><a href="W02_04_demo_tidyverse.html#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   TierID mean_timelag</span></span>
<span id="cb33-10"><a href="W02_04_demo_tidyverse.html#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb33-11"><a href="W02_04_demo_tidyverse.html#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 002A          1286.</span></span>
<span id="cb33-12"><a href="W02_04_demo_tidyverse.html#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 016A          1412.</span></span>
<span id="cb33-13"><a href="W02_04_demo_tidyverse.html#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 018A          1599.</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e
</div>
<div id="bring-it-all-together" class="section level3">
<h3>Bring it all together…</h3>
<p>Here is the same approach with a different, smaller dataset:</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="W02_04_demo_tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a>pigs <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb45-2"><a href="W02_04_demo_tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">TierID=</span><span class="fu">c</span>(<span class="dv">8001</span>,<span class="dv">8003</span>,<span class="dv">8004</span>,<span class="dv">8005</span>,<span class="dv">8800</span>,<span class="dv">8820</span>,<span class="dv">3000</span>,<span class="dv">3001</span>,<span class="dv">3002</span>,<span class="dv">3003</span>,<span class="dv">8330</span>,<span class="dv">7222</span>),</span>
<span id="cb45-3"><a href="W02_04_demo_tidyverse.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex=</span><span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>),</span>
<span id="cb45-4"><a href="W02_04_demo_tidyverse.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;A&quot;</span>),</span>
<span id="cb45-5"><a href="W02_04_demo_tidyverse.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight=</span><span class="fu">c</span>(<span class="fl">50.755</span>,<span class="fl">43.409</span>,<span class="fl">12.000</span>,<span class="fl">16.787</span>,<span class="fl">20.987</span>,<span class="fl">25.765</span>,<span class="fl">22.0122</span>,<span class="fl">21.343</span>,<span class="fl">12.532</span>,<span class="fl">54.32</span>,<span class="fl">11.027</span>,<span class="fl">88.08</span>)</span>
<span id="cb45-6"><a href="W02_04_demo_tidyverse.html#cb45-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-7"><a href="W02_04_demo_tidyverse.html#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="W02_04_demo_tidyverse.html#cb45-8" aria-hidden="true" tabindex="-1"></a>pigs</span>
<span id="cb45-9"><a href="W02_04_demo_tidyverse.html#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    TierID sex age  weight</span></span>
<span id="cb45-10"><a href="W02_04_demo_tidyverse.html#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    8001   M   A 50.7550</span></span>
<span id="cb45-11"><a href="W02_04_demo_tidyverse.html#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    8003   M   A 43.4090</span></span>
<span id="cb45-12"><a href="W02_04_demo_tidyverse.html#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 3    8004   M   J 12.0000</span></span>
<span id="cb45-13"><a href="W02_04_demo_tidyverse.html#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 4    8005   F   A 16.7870</span></span>
<span id="cb45-14"><a href="W02_04_demo_tidyverse.html#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 5    8800   M   J 20.9870</span></span>
<span id="cb45-15"><a href="W02_04_demo_tidyverse.html#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 6    8820   M   J 25.7650</span></span>
<span id="cb45-16"><a href="W02_04_demo_tidyverse.html#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 7    3000   F   J 22.0122</span></span>
<span id="cb45-17"><a href="W02_04_demo_tidyverse.html#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 8    3001   F   A 21.3430</span></span>
<span id="cb45-18"><a href="W02_04_demo_tidyverse.html#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 9    3002   M   J 12.5320</span></span>
<span id="cb45-19"><a href="W02_04_demo_tidyverse.html#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 10   3003   F   J 54.3200</span></span>
<span id="cb45-20"><a href="W02_04_demo_tidyverse.html#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 11   8330   M   A 11.0270</span></span>
<span id="cb45-21"><a href="W02_04_demo_tidyverse.html#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 12   7222   F   A 88.0800</span></span>
<span id="cb45-22"><a href="W02_04_demo_tidyverse.html#cb45-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-23"><a href="W02_04_demo_tidyverse.html#cb45-23" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb45-24"><a href="W02_04_demo_tidyverse.html#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(         </span>
<span id="cb45-25"><a href="W02_04_demo_tidyverse.html#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb45-26"><a href="W02_04_demo_tidyverse.html#cb45-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-27"><a href="W02_04_demo_tidyverse.html#cb45-27" aria-hidden="true" tabindex="-1"></a><span class="do">##   mean_weight</span></span>
<span id="cb45-28"><a href="W02_04_demo_tidyverse.html#cb45-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    31.58477</span></span>
<span id="cb45-29"><a href="W02_04_demo_tidyverse.html#cb45-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-30"><a href="W02_04_demo_tidyverse.html#cb45-30" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb45-31"><a href="W02_04_demo_tidyverse.html#cb45-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb45-32"><a href="W02_04_demo_tidyverse.html#cb45-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(         </span>
<span id="cb45-33"><a href="W02_04_demo_tidyverse.html#cb45-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb45-34"><a href="W02_04_demo_tidyverse.html#cb45-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-35"><a href="W02_04_demo_tidyverse.html#cb45-35" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 x 2</span></span>
<span id="cb45-36"><a href="W02_04_demo_tidyverse.html#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="do">##   sex   mean_weight</span></span>
<span id="cb45-37"><a href="W02_04_demo_tidyverse.html#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb45-38"><a href="W02_04_demo_tidyverse.html#cb45-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 F            40.5</span></span>
<span id="cb45-39"><a href="W02_04_demo_tidyverse.html#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 M            25.2</span></span>
<span id="cb45-40"><a href="W02_04_demo_tidyverse.html#cb45-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-41"><a href="W02_04_demo_tidyverse.html#cb45-41" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb45-42"><a href="W02_04_demo_tidyverse.html#cb45-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex,age) <span class="sc">%&gt;%</span></span>
<span id="cb45-43"><a href="W02_04_demo_tidyverse.html#cb45-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(         </span>
<span id="cb45-44"><a href="W02_04_demo_tidyverse.html#cb45-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb45-45"><a href="W02_04_demo_tidyverse.html#cb45-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-46"><a href="W02_04_demo_tidyverse.html#cb45-46" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;sex&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb45-47"><a href="W02_04_demo_tidyverse.html#cb45-47" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4 x 3</span></span>
<span id="cb45-48"><a href="W02_04_demo_tidyverse.html#cb45-48" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   sex [2]</span></span>
<span id="cb45-49"><a href="W02_04_demo_tidyverse.html#cb45-49" aria-hidden="true" tabindex="-1"></a><span class="do">##   sex   age   mean_weight</span></span>
<span id="cb45-50"><a href="W02_04_demo_tidyverse.html#cb45-50" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb45-51"><a href="W02_04_demo_tidyverse.html#cb45-51" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 F     A            42.1</span></span>
<span id="cb45-52"><a href="W02_04_demo_tidyverse.html#cb45-52" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 F     J            38.2</span></span>
<span id="cb45-53"><a href="W02_04_demo_tidyverse.html#cb45-53" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 M     A            35.1</span></span>
<span id="cb45-54"><a href="W02_04_demo_tidyverse.html#cb45-54" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 M     J            17.8</span></span></code></pre></div>
=======
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="W02_04_demo_tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a>pigs <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb34-2"><a href="W02_04_demo_tidyverse.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">TierID=</span><span class="fu">c</span>(<span class="dv">8001</span>,<span class="dv">8003</span>,<span class="dv">8004</span>,<span class="dv">8005</span>,<span class="dv">8800</span>,<span class="dv">8820</span>,<span class="dv">3000</span>,<span class="dv">3001</span>,<span class="dv">3002</span>,<span class="dv">3003</span>,<span class="dv">8330</span>,<span class="dv">7222</span>),</span>
<span id="cb34-3"><a href="W02_04_demo_tidyverse.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex=</span><span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>),</span>
<span id="cb34-4"><a href="W02_04_demo_tidyverse.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;J&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;A&quot;</span>),</span>
<span id="cb34-5"><a href="W02_04_demo_tidyverse.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight=</span><span class="fu">c</span>(<span class="fl">50.755</span>,<span class="fl">43.409</span>,<span class="fl">12.000</span>,<span class="fl">16.787</span>,<span class="fl">20.987</span>,<span class="fl">25.765</span>,<span class="fl">22.0122</span>,<span class="fl">21.343</span>,<span class="fl">12.532</span>,<span class="fl">54.32</span>,<span class="fl">11.027</span>,<span class="fl">88.08</span>)</span>
<span id="cb34-6"><a href="W02_04_demo_tidyverse.html#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="W02_04_demo_tidyverse.html#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="W02_04_demo_tidyverse.html#cb34-8" aria-hidden="true" tabindex="-1"></a>pigs</span>
<span id="cb34-9"><a href="W02_04_demo_tidyverse.html#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    TierID sex age  weight</span></span>
<span id="cb34-10"><a href="W02_04_demo_tidyverse.html#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    8001   M   A 50.7550</span></span>
<span id="cb34-11"><a href="W02_04_demo_tidyverse.html#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 2    8003   M   A 43.4090</span></span>
<span id="cb34-12"><a href="W02_04_demo_tidyverse.html#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 3    8004   M   J 12.0000</span></span>
<span id="cb34-13"><a href="W02_04_demo_tidyverse.html#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 4    8005   F   A 16.7870</span></span>
<span id="cb34-14"><a href="W02_04_demo_tidyverse.html#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 5    8800   M   J 20.9870</span></span>
<span id="cb34-15"><a href="W02_04_demo_tidyverse.html#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 6    8820   M   J 25.7650</span></span>
<span id="cb34-16"><a href="W02_04_demo_tidyverse.html#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 7    3000   F   J 22.0122</span></span>
<span id="cb34-17"><a href="W02_04_demo_tidyverse.html#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 8    3001   F   A 21.3430</span></span>
<span id="cb34-18"><a href="W02_04_demo_tidyverse.html#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 9    3002   M   J 12.5320</span></span>
<span id="cb34-19"><a href="W02_04_demo_tidyverse.html#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 10   3003   F   J 54.3200</span></span>
<span id="cb34-20"><a href="W02_04_demo_tidyverse.html#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 11   8330   M   A 11.0270</span></span>
<span id="cb34-21"><a href="W02_04_demo_tidyverse.html#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 12   7222   F   A 88.0800</span></span>
<span id="cb34-22"><a href="W02_04_demo_tidyverse.html#cb34-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-23"><a href="W02_04_demo_tidyverse.html#cb34-23" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb34-24"><a href="W02_04_demo_tidyverse.html#cb34-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(         </span>
<span id="cb34-25"><a href="W02_04_demo_tidyverse.html#cb34-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb34-26"><a href="W02_04_demo_tidyverse.html#cb34-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-27"><a href="W02_04_demo_tidyverse.html#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="do">##   mean_weight</span></span>
<span id="cb34-28"><a href="W02_04_demo_tidyverse.html#cb34-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    31.58477</span></span>
<span id="cb34-29"><a href="W02_04_demo_tidyverse.html#cb34-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-30"><a href="W02_04_demo_tidyverse.html#cb34-30" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb34-31"><a href="W02_04_demo_tidyverse.html#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb34-32"><a href="W02_04_demo_tidyverse.html#cb34-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(         </span>
<span id="cb34-33"><a href="W02_04_demo_tidyverse.html#cb34-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb34-34"><a href="W02_04_demo_tidyverse.html#cb34-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-35"><a href="W02_04_demo_tidyverse.html#cb34-35" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 x 2</span></span>
<span id="cb34-36"><a href="W02_04_demo_tidyverse.html#cb34-36" aria-hidden="true" tabindex="-1"></a><span class="do">##   sex   mean_weight</span></span>
<span id="cb34-37"><a href="W02_04_demo_tidyverse.html#cb34-37" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb34-38"><a href="W02_04_demo_tidyverse.html#cb34-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 F            40.5</span></span>
<span id="cb34-39"><a href="W02_04_demo_tidyverse.html#cb34-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 M            25.2</span></span>
<span id="cb34-40"><a href="W02_04_demo_tidyverse.html#cb34-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-41"><a href="W02_04_demo_tidyverse.html#cb34-41" aria-hidden="true" tabindex="-1"></a>pigs <span class="sc">%&gt;%</span></span>
<span id="cb34-42"><a href="W02_04_demo_tidyverse.html#cb34-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex,age) <span class="sc">%&gt;%</span></span>
<span id="cb34-43"><a href="W02_04_demo_tidyverse.html#cb34-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(         </span>
<span id="cb34-44"><a href="W02_04_demo_tidyverse.html#cb34-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_weight =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb34-45"><a href="W02_04_demo_tidyverse.html#cb34-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-46"><a href="W02_04_demo_tidyverse.html#cb34-46" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4 x 3</span></span>
<span id="cb34-47"><a href="W02_04_demo_tidyverse.html#cb34-47" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   sex [2]</span></span>
<span id="cb34-48"><a href="W02_04_demo_tidyverse.html#cb34-48" aria-hidden="true" tabindex="-1"></a><span class="do">##   sex   age   mean_weight</span></span>
<span id="cb34-49"><a href="W02_04_demo_tidyverse.html#cb34-49" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb34-50"><a href="W02_04_demo_tidyverse.html#cb34-50" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 F     A            42.1</span></span>
<span id="cb34-51"><a href="W02_04_demo_tidyverse.html#cb34-51" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 F     J            38.2</span></span>
<span id="cb34-52"><a href="W02_04_demo_tidyverse.html#cb34-52" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 M     A            35.1</span></span>
<span id="cb34-53"><a href="W02_04_demo_tidyverse.html#cb34-53" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 M     J            17.8</span></span></code></pre></div>
>>>>>>> 9e1f93f3fe69289879ce212ed64e1847c2ee494e

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="W02_03_preperation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="W02_05_tasks_and_inputs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ComputationalMovementAnalysis/FS21/edit/master/12_Week2/W02_04_demo_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ComputationalMovementAnalysis/FS21/blob/master/12_Week2/W02_04_demo_tidyverse.Rmd",
"text": null
},
"download": ["patterns-and-trends.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
