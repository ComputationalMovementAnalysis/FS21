<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>GEO880: Patterns and Trends in Environmental Data</title>
  <meta name="description" content="GEO880: Patterns and Trends in Environmental Data">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="GEO880: Patterns and Trends in Environmental Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="GEO880: Patterns and Trends in Environmental Data" />
  
  
  

<meta name="author" content="Patrick Laube and Nils Ratnaweera">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="lesson-2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-0.7.7/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="libs/leaflet-binding-1.1.0/leaflet.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction Chapter</a></li>
<li class="chapter" data-level="2" data-path="lesson-1.html"><a href="lesson-1.html"><i class="fa fa-check"></i><b>2</b> Lesson 1</a><ul>
<li class="chapter" data-level="2.1" data-path="lesson-1.html"><a href="lesson-1.html#leaning-outcomes"><i class="fa fa-check"></i><b>2.1</b> Leaning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="lesson-1.html"><a href="lesson-1.html#prerequisites"><i class="fa fa-check"></i><b>2.2</b> Prerequisites</a></li>
<li class="chapter" data-level="2.3" data-path="lesson-1.html"><a href="lesson-1.html#preperation"><i class="fa fa-check"></i><b>2.3</b> Preperation</a></li>
<li class="chapter" data-level="2.4" data-path="lesson-1.html"><a href="lesson-1.html#tasks"><i class="fa fa-check"></i><b>2.4</b> Tasks</a><ul>
<li class="chapter" data-level="2.4.1" data-path="lesson-1.html"><a href="lesson-1.html#task-1-initialize-project"><i class="fa fa-check"></i><b>2.4.1</b> Task 1: Initialize project</a></li>
<li class="chapter" data-level="2.4.2" data-path="lesson-1.html"><a href="lesson-1.html#task-2-import-data"><i class="fa fa-check"></i><b>2.4.2</b> Task 2: Import data</a></li>
<li class="chapter" data-level="2.4.3" data-path="lesson-1.html"><a href="lesson-1.html#task-3-explore-data"><i class="fa fa-check"></i><b>2.4.3</b> Task 3: Explore Data</a></li>
<li class="chapter" data-level="2.4.4" data-path="lesson-1.html"><a href="lesson-1.html#task-4-handling-spatial-data"><i class="fa fa-check"></i><b>2.4.4</b> Task 4: Handling spatial data</a></li>
<li class="chapter" data-level="2.4.5" data-path="lesson-1.html"><a href="lesson-1.html#task-5"><i class="fa fa-check"></i><b>2.4.5</b> Task 5</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="lesson-1.html"><a href="lesson-1.html#solutions-rcode"><i class="fa fa-check"></i><b>2.5</b> Solutions (RCode)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lesson-2.html"><a href="lesson-2.html"><i class="fa fa-check"></i><b>3</b> Lesson 2</a><ul>
<li class="chapter" data-level="3.1" data-path="lesson-2.html"><a href="lesson-2.html#learning-outcomes"><i class="fa fa-check"></i><b>3.1</b> Learning Outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-2.html"><a href="lesson-2.html#prerequisites-1"><i class="fa fa-check"></i><b>3.2</b> Prerequisites</a></li>
<li class="chapter" data-level="3.3" data-path="lesson-2.html"><a href="lesson-2.html#preperation-1"><i class="fa fa-check"></i><b>3.3</b> Preperation</a></li>
<li class="chapter" data-level="3.4" data-path="lesson-2.html"><a href="lesson-2.html#tasks-1"><i class="fa fa-check"></i><b>3.4</b> Tasks</a><ul>
<li class="chapter" data-level="3.4.1" data-path="lesson-2.html"><a href="lesson-2.html#task-1"><i class="fa fa-check"></i><b>3.4.1</b> Task 1</a></li>
<li class="chapter" data-level="3.4.2" data-path="lesson-2.html"><a href="lesson-2.html#task-2"><i class="fa fa-check"></i><b>3.4.2</b> Task 2</a></li>
<li class="chapter" data-level="3.4.3" data-path="lesson-2.html"><a href="lesson-2.html#task-3"><i class="fa fa-check"></i><b>3.4.3</b> Task 3</a></li>
<li class="chapter" data-level="3.4.4" data-path="lesson-2.html"><a href="lesson-2.html#task-4"><i class="fa fa-check"></i><b>3.4.4</b> Task 4</a></li>
<li class="chapter" data-level="3.4.5" data-path="lesson-2.html"><a href="lesson-2.html#task-5-1"><i class="fa fa-check"></i><b>3.4.5</b> Task 5</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="lesson-2.html"><a href="lesson-2.html#solutions-rcode-1"><i class="fa fa-check"></i><b>3.5</b> Solutions (RCode)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lesson-3.html"><a href="lesson-3.html"><i class="fa fa-check"></i><b>4</b> Lesson 3</a><ul>
<li class="chapter" data-level="4.1" data-path="lesson-3.html"><a href="lesson-3.html#learning-outcomes-1"><i class="fa fa-check"></i><b>4.1</b> Learning Outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="lesson-3.html"><a href="lesson-3.html#prerequisites-2"><i class="fa fa-check"></i><b>4.2</b> Prerequisites</a></li>
<li class="chapter" data-level="4.3" data-path="lesson-3.html"><a href="lesson-3.html#preperation-2"><i class="fa fa-check"></i><b>4.3</b> Preperation</a></li>
<li class="chapter" data-level="4.4" data-path="lesson-3.html"><a href="lesson-3.html#tasks-2"><i class="fa fa-check"></i><b>4.4</b> Tasks</a><ul>
<li class="chapter" data-level="4.4.1" data-path="lesson-3.html"><a href="lesson-3.html#task-1-1"><i class="fa fa-check"></i><b>4.4.1</b> Task 1</a></li>
<li class="chapter" data-level="4.4.2" data-path="lesson-3.html"><a href="lesson-3.html#task-2-1"><i class="fa fa-check"></i><b>4.4.2</b> Task 2</a></li>
<li class="chapter" data-level="4.4.3" data-path="lesson-3.html"><a href="lesson-3.html#task-3-optional"><i class="fa fa-check"></i><b>4.4.3</b> Task 3 (Optional)</a></li>
<li class="chapter" data-level="4.4.4" data-path="lesson-3.html"><a href="lesson-3.html#task-4-1"><i class="fa fa-check"></i><b>4.4.4</b> Task 4</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="lesson-3.html"><a href="lesson-3.html#solution-r-code"><i class="fa fa-check"></i><b>4.5</b> Solution (R Code)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lesson-4.html"><a href="lesson-4.html"><i class="fa fa-check"></i><b>5</b> Lesson 4</a><ul>
<li class="chapter" data-level="5.1" data-path="lesson-4.html"><a href="lesson-4.html#learning-outcomes-2"><i class="fa fa-check"></i><b>5.1</b> Learning Outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="lesson-4.html"><a href="lesson-4.html#prerequisites-3"><i class="fa fa-check"></i><b>5.2</b> Prerequisites</a></li>
<li class="chapter" data-level="5.3" data-path="lesson-4.html"><a href="lesson-4.html#preperation-3"><i class="fa fa-check"></i><b>5.3</b> Preperation</a></li>
<li class="chapter" data-level="5.4" data-path="lesson-4.html"><a href="lesson-4.html#tasks-3"><i class="fa fa-check"></i><b>5.4</b> Tasks</a><ul>
<li class="chapter" data-level="5.4.1" data-path="lesson-4.html"><a href="lesson-4.html#task-1-2"><i class="fa fa-check"></i><b>5.4.1</b> Task 1</a></li>
<li class="chapter" data-level="5.4.2" data-path="lesson-4.html"><a href="lesson-4.html#task-2-2"><i class="fa fa-check"></i><b>5.4.2</b> Task 2</a></li>
<li class="chapter" data-level="5.4.3" data-path="lesson-4.html"><a href="lesson-4.html#task-3-1"><i class="fa fa-check"></i><b>5.4.3</b> Task 3</a></li>
<li class="chapter" data-level="5.4.4" data-path="lesson-4.html"><a href="lesson-4.html#task-4-2"><i class="fa fa-check"></i><b>5.4.4</b> Task 4</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lesson-4.html"><a href="lesson-4.html#solutions-rcode-2"><i class="fa fa-check"></i><b>5.5</b> Solutions (RCode)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="individual-project.html"><a href="individual-project.html"><i class="fa fa-check"></i><b>6</b> Individual Project</a><ul>
<li class="chapter" data-level="6.1" data-path="individual-project.html"><a href="individual-project.html#possible-topics"><i class="fa fa-check"></i><b>6.1</b> Possible topics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GEO880: Patterns and Trends in Environmental Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-1" class="section level1">
<h1><span class="header-section-number">2</span> Lesson 1</h1>
<!-- '- Set up Rstudio Project -->
<!-- - Import and clean data -->
<!-- - Explore Dataset: remove outliers, find sampling interval, make subsets and find overlapping areas of individuals) -->
<!-- - Make my first simple map -->
<p>Lesson 1 (L1) covers the necessary steps for getting ready in <code>R</code> and some basic concepts for setting up a well-structured <code>R</code> project. The lesson introduces how additional packages that provide useful functions are made available and how temporal data is handled. The lesson concludes with the creation of your first map featuring movement data. <!-- todo: is this still true? --></p>
<div id="leaning-outcomes" class="section level2">
<h2><span class="header-section-number">2.1</span> Leaning outcomes</h2>
<ul>
<li>You learn how to structure an <code>R</code> project.</li>
<li>You can read movement data from a .csv-file into a <code>data.frame</code> and into a <code>sf</code> object.</li>
<li>You can produce simple maps of your trajectory data using <code>ggplot2</code>, <code>leaflet</code>, <code>plotly</code> and <code>tmap</code></li>
<li>You can manipulate time data (stimmt das?)…?</li>
</ul>
</div>
<div id="prerequisites" class="section level2">
<h2><span class="header-section-number">2.2</span> Prerequisites</h2>
<p>Readings Skills from “R for Data Science” <span class="citation">(Wickham and Grolemund 2017)</span>:</p>
<ul>
<li>RS1.1 Preface (16p, ix-xxiv)</li>
<li>RS1.2 Chap2 Workflow basics (3p, 37-39)</li>
<li>RS1.3 Chap4 Workflow scripts (3p, 77-79)</li>
<li>RS1.4 Chap6 workflow projects (6p, 111-116)</li>
<li>RS1.5 Chap8 Data Import with <code>readr</code> (21p)</li>
<li>RS1.6 Chap13 Date and Times with <code>lubridate</code> (18p, 237-256)</li>
</ul>
</div>
<div id="preperation" class="section level2">
<h2><span class="header-section-number">2.3</span> Preperation</h2>
<p>Install the packages <code>tidyverse</code>, <code>sf</code><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> and <code>devtools</code> (using and so on). Use <code>devtools</code> to install the newest version of ggplot from github (see code below). Currently, only the newest version of <code>ggplot2</code> can plot <code>sf</code>-objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)
<span class="kw">install.packages</span>(<span class="st">&#39;udunits2&#39;</span>, <span class="dt">type =</span> <span class="st">&quot;source&quot;</span>, <span class="dt">repo =</span> <span class="st">&quot;cran.rstudio.com&quot;</span>, <span class="dt">configure.args=</span><span class="st">&quot;--with-udunits2-include=/usr/include/udunits2&quot;</span>) <span class="co"># run this line only if you are workin on RStudio Server</span>

<span class="kw">install.packages</span>(<span class="st">&quot;sf&quot;</span>)

<span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)

devtools::<span class="kw">install_github</span>(<span class="st">&quot;tidyverse/ggplot2&quot;</span>)</code></pre></div>
</div>
<div id="tasks" class="section level2">
<h2><span class="header-section-number">2.4</span> Tasks</h2>
<div id="task-1-initialize-project" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Task 1: Initialize project</h3>
<p>Create a new <em>RStudio Project</em>. As recommended in <span class="citation">Wickham and Grolemund (2017)</span>, remove the option “<em>Restore .RData into workspace at startup</em>” and “<em>save workspace to .RData on exit</em>” to “<em>Never</em>”.</p>
<!-- ![](http://r4ds.had.co.nz/screenshots/rstudio-workspace.png) -->
<p>Create a new R-File and divide it into the sections necessary in a classical Data Science Workflow. We recommend following sections:</p>
<ul>
<li>Loading enironment / librarie</li>
<li>Data import</li>
<li>Data clensing</li>
<li>Data analysis and visualization</li>
</ul>
<p>“Sections” can be created within RStudio by adding Comments (<code>#</code>) with at least 4 Trailing dashes (<code>-</code>), equal signs (<code>=</code>), or pound signs (<code>#</code>). Sections allow code folding (try click on the small triangle next to the line number) and provides and navigation (try the shortcut: <code>Shift</code>+<code>Alt</code>+<code>J</code>).</p>
<p>Load the packages <code>tidyverse</code> and <code>sf</code> in the appropriate section.</p>
</div>
<div id="task-2-import-data" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Task 2: Import data</h3>
<p>In section “data import”, import the file <code>wildschwein.csv</code>. For everyone working on the RStudio Server, this data is saved in a Folder named “CMA_FS2018_Filestorage” <!-- todo insert correct name --> one level <em>above</em> your home folder. You will have to move “up” one or two levels from your project folder using the syntax and then into the correct folder using the syntax <code>&quot;../../CMA_FS2018_Filestorage/&quot;</code>(for two levels) or <code>&quot;../CMA_FS2018_Filestorage/&quot;</code> (for one level).</p>
<p>Note:</p>
<ul>
<li>If your are using <a href="https://support.rstudio.com/hc/en-us/articles/218611977-Importing-Data-with-RStudio">a graphical tool</a> to import your code, make sure you save the corresponding code in your R Script. This is important in regard to the reproducibility of your script and will ensure that your workflow is documented without gaps.</li>
<li>I recommend using one of the <code>tidyverse</code> functions (<code>read_*</code>) to import your data. These functions are less error prone than the base <code>R</code> functions (<code>read.*</code>). Specifically to the wild boar data, I recommend <code>read_delim</code>.</li>
<li>if you receive warnings during import, have a look at these warnings by using the function <code>problems()</code>. Resolve these problems until import runs without warnings.</li>
<li>Assign correct data types as necessary and make sure the time zone is set correctly for the date/time column.</li>
</ul>
</div>
<div id="task-3-explore-data" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Task 3: Explore Data</h3>
<p>We will use a variate of different plotting techniques in this course, several have emerged in recent years, each with their specific strengths and weaknesses. While <code>base::plot()</code>is quick and simple, it not very scalable with growing complexity. ggplot offers solution for most use cases and has a elegant syntax that is easy to get accustomed to. <code>plotly()</code> offers great interactive and linked view facilities while <code>tmap()</code> was designed specifically for spatial data.</p>
<p>Get an overview of your data by creating a first “map-like” plot of your data producing a simple scatter plot with ggplot2. Assign every individual animal its own colour (using the ggplot2 argument colour). Do you spot outliers? If so, get rid of the outliers. Plot your data again, this time without outliers. Save your plot using <code>ggsave()</code>. Save your code in the appropriate section.</p>
<p>Setting up a <code>ggplot</code> with our data is done using the command <code>ggplot(roe_gps_all, aes(X, Y, colour = TierID))</code>. Creating a map is done via the basic scatter plot command <code>geom_point()</code>, using a fixed aspect ratio of 1.</p>
</div>
<div id="task-4-handling-spatial-data" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Task 4: Handling spatial data</h3>
<p>Till now, we’ve handled spatial data within data frames. This works well for many tasks, but sometimes we need special <em>spatial</em> classes to handle our trajectories. Projecting the WGS84 (Lat/Long) coordinates into CH1903_LV95 is such a case.</p>
<p>Some of you might know the <code>sp</code> package with the classes <code>SpatialPoints</code> and <code>SpatialPointsDataFrame</code>. Just recently the new and exiting package <code>sf</code>, was released on CRAN. <code>sf</code> has some huge advantages over sp:</p>
<ul>
<li>simple features are essentially data frames, which mean they interface with the <code>tidyverse</code> (and the <code>dplyr</code> SAC paradigm)</li>
<li>are OGC (ISO 19125-1:2004) compliant and interface with GDAL, PostGIS, GeoJSON and so fourth</li>
<li>are being rapidly implemented in visualisation tools such as <code>ggplot2</code>, <code>gplotly</code> and <code>tmap</code></li>
</ul>
<p>A lot of reasons to learn <code>sf</code> and work with this library. The down side is however, that due to its youth not all packages have implemented <code>sf</code>. We have created a small package (<code>CMAtools</code>) to help you with such cases, so we will not have to switch back and fourth between classes during this course.</p>
<p>Use the function <code>st_as_sf()</code> while correctly specifying your Lat/Long Coordinates. Set the coordinate reference system using the <a href="http://spatialreference.org/ref/epsg/4326/">EPSG Code</a> as an integer value. You can set the argument <code>agr</code> to <code>constant</code>. Save to output of this operation to a new variable <code>wildschwein_BE_sf.</code></p>
<p>Take a look at this sf object (<code>head()</code>, <code>str()</code>,<code>View()</code>) and try a few classical dataframe operations on it (subsetting, filtering). Now transform the coordinates into <a href="spatialreference.org/ref/epsg/2056/">CH1903_LV95</a> using the function st_transform(). Again, use the EPSG code as an integer.</p>
</div>
<div id="task-5" class="section level3">
<h3><span class="header-section-number">2.4.5</span> Task 5</h3>
<p>Now that we have a spatial object of our point data, we can do spatial operations on them. We can for example calculate the minimum</p>
<p>Extract the new Coordinates using <code>st_coordinates()</code> and attach them (<code>cbind()</code>) to your original <code>dataframe.</code></p>
<p>Note that <code>st_transform()</code> names the coordinates <code>X</code> and <code>Y</code>, but <a href="https://www.swisstopo.admin.ch/de/wissen-fakten/geodaesie-vermessung/neue-koordinaten.html">CH1903 LV03</a> names the Axes <code>E</code> and <code>N</code>. Rename the axes accordingly (before or after attaching them to your dataframe).</p>
<p>Keep your Long / Lat coordinates, since it is helpful to have both WGS84 and CH1903+ Coordinates stored in the dataframe:</p>
<ul>
<li>WGS84: this is our original data therefore we should not discard this information. Additionally, some visualization tools (e.g.. <code>Leaflet</code> and <code>ggmap</code>) need Lat/Long Coordinates</li>
<li>CH1903+ these Cartesian coordinates are helpful when calculating euclidean distances between positions (this is much more complicated with WGS84 Data) and if we use swisstopo background- and other context data</li>
</ul>
</div>
</div>
<div id="solutions-rcode" class="section level2">
<h2><span class="header-section-number">2.5</span> Solutions (RCode)</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## install.packages(&quot;tidyverse&quot;)
## install.packages(&#39;udunits2&#39;, type = &quot;source&quot;, repo = &quot;cran.rstudio.com&quot;, configure.args=&quot;--with-udunits2-include=/usr/include/udunits2&quot;) # run this line only if you are workin on RStudio Server
## 
## install.packages(&quot;sf&quot;)
## 
## install.packages(&quot;devtools&quot;)
## 
## install_github(&quot;tidyverse/ggplot2&quot;)

<span class="co"># Loading enironment / libraries ####</span>
<span class="kw">library</span>(tidyverse)

<span class="kw">library</span>(sf)


<span class="co"># Data import ####</span>

<span class="co"># Data clensing ####</span>

<span class="co"># Data analysis and visualization ####</span>



## Task 2 ####################


<span class="co"># Data import ####</span>
wildschwein_BE &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="st">&quot;../CMA_FS2018_Filestorage/wildschwein_BE.csv&quot;</span>,<span class="st">&quot;,&quot;</span>)

## Task 3 ####################


<span class="kw">ggplot</span>(wildschwein_BE, <span class="kw">aes</span>(Lat,Long, <span class="dt">colour =</span> TierID)) +
<span class="st">  </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dv">1</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)

wildschwein_BE &lt;-<span class="st"> </span><span class="kw">filter</span>(wildschwein_BE, Lat &lt;<span class="st"> </span><span class="dv">50</span>)

## Task 4 ####################

wildschwein_BE_sf =<span class="st"> </span><span class="kw">st_as_sf</span>(wildschwein_BE, <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;Long&quot;</span>, <span class="st">&quot;Lat&quot;</span>), <span class="dt">crs =</span> <span class="dv">4326</span>, <span class="dt">agr =</span> <span class="st">&quot;constant&quot;</span>, <span class="dt">remove =</span> F)


wildschwein_BE_sf &lt;-<span class="st"> </span><span class="kw">st_transform</span>(wildschwein_BE_sf, <span class="dv">2056</span>)


mcp &lt;-<span class="st"> </span>wildschwein_BE_sf %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(TierID) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>() %&gt;%
<span class="st">  </span><span class="kw">st_convex_hull</span>()

<span class="kw">ggplot</span>(mcp,<span class="kw">aes</span>(<span class="dt">fill =</span> TierID)) +
<span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">alpha =</span> <span class="fl">0.4</span>) +
<span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">datum =</span> <span class="dv">2056</span>) +
<span class="st">  </span><span class="kw">theme</span>(
    <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,
    <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;transparent&quot;</span>),
    <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>)
    )



coordinates &lt;-<span class="st"> </span><span class="kw">st_coordinates</span>(wildschwein_BE_sf)

<span class="kw">colnames</span>(coordinates) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;E&quot;</span>,<span class="st">&quot;N&quot;</span>)

wildschwein_BE_sf &lt;-<span class="st"> </span><span class="kw">cbind</span>(wildschwein_BE_sf,coordinates)

## NA</code></pre></div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>If you are working on RStudio Server, you will need to install <code>udunits2</code> with some additional parameters (see code example).<a href="lesson-1.html#fnref1">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
